# Unity Core Shader Library 总览索引

## 文件分类索引

### 核心基础

- [[Macros]] - 宏定义全览（数学常量、模板函数、平台抽象等）
- [[Common]] - 基础类型、宏、工具函数（最基础的文件）
- [[CommonMaterial]] - 材质属性工具（粗糙度转换、法线混合等）
- [[CommonLighting]] - 光照计算工具（衰减、遮挡等）
- [[CommonShadow]] - 阴影采样工具
- [[CommonDeprecated]] - 废弃函数（向后兼容）
- [[SpaceTransforms]] - 空间变换函数（OS/WS/VS/TS 等）

### 颜色

- [[Color]] - 颜色空间转换（sRGB、Gamma、线性等）
- [[ACES]] - ACES 颜色空间转换

### 光照

- [[BSDF]] - 双向散射分布函数（Fresnel、GGX、漫反射等）
- [[AreaLighting]] - 面光源计算
- [[EntityLighting]] - 实体光照（光照贴图、探针体积等）

### 采样

- [[Sampling]] - 采样函数（球面、半球、圆锥等）
- [[Hammersley]] - Hammersley 低差异序列
- [[Fibonacci]] - Fibonacci 序列采样
- [[SampleUVMapping]] - UV 映射抽象（UVSet、平面、三平面）

### 几何

- [[GeometricTools]] - 几何工具（射线-盒子/球体相交等）
- [[ParallaxMapping]] - 视差映射
- [[PerPixelDisplacement]] - 每像素位移
- [[VertexCubeSlicing]] - 顶点立方体切片（体积渲染）

### 纹理

- [[Texture]] - 纹理采样抽象（UnityTexture2D 等）
- [[TextureStack]] - 虚拟纹理堆栈
- [[VirtualTexturing]] - 虚拟纹理查找和采样
- [[Packing]] - 打包/解包函数（法线、HDR 颜色等）

### 数学工具

- [[Hashes]] - 哈希函数
- [[Random]] - 伪随机数生成
- [[Filtering]] - 过滤函数（B-Spline、双三次等）
- [[SDF2D]] - 2D 有符号距离场
- [[SpaceFillingCurves]] - 空间填充曲线（Morton 码）
- [[SphericalHarmonics]] - 球谐函数

### 系统

- [[UnityInstancing]] - Unity GPU 实例化
- [[UnityDOTSInstancing]] - DOTS 实例化
- [[Version]] - 着色器库版本信息
- [[Tessellation]] - 曲面细分（Phong、屏幕空间等）

### 阴影

- [[ShadowSamplingTent]] - Tent 函数 PCF 过滤（3x3、5x5、7x7）

### 其他

- [[Debug]] - 调试工具
- [[ShaderDebugPrint]] - 着色器调试打印
- [[Refraction]] - 折射函数
- [[PhysicalCamera]] - 物理相机（EV100、曝光等）
- [[ScreenCoordOverride]] - 屏幕坐标覆盖
- [[VolumeRendering]] - 体积渲染（参与介质）
- [[BC6H]] - BC6H 压缩
- [[GlobalSamplers]] - 全局采样器
- [[GraniteShaderLibBase]] - Granite 虚拟纹理基础

### API 平台特定

- [[D3D11]] - DirectX 11 平台定义
- [[GLCore]] - OpenGL Core 平台定义
- [[GLES2]] - OpenGL ES 2.0 平台定义
- [[GLES3]] - OpenGL ES 3.0 平台定义
- [[Metal]] - Metal 平台定义
- [[Switch]] - Nintendo Switch 平台定义
- [[Vulkan]] - Vulkan 平台定义
- [[Validate]] - 平台验证宏

## 依赖关系图

```
[Common] (基础)
├── [CommonMaterial]
├── [CommonLighting]
├── [CommonShadow]
├── [SpaceTransforms]
├── [Color]
│   └── [ACES]
├── [BSDF]
│   └── [Color]
├── [AreaLighting]
│   ├── [Common]
│   └── [BSDF]
├── [EntityLighting]
│   ├── [Common]
│   ├── [Color]
│   └── [SphericalHarmonics]
├── [Sampling]
│   ├── [Hammersley]
│   └── [Fibonacci]
├── [SampleUVMapping]
│   └── [Common]
├── [Texture]
│   ├── [Common]
│   └── [Packing]
├── [TextureStack]
│   └── [VirtualTexturing]
│       └── [GraniteShaderLibBase]
└── [平台 API]
    ├── [D3D11]
    ├── [GLCore]
    ├── [GLES2]
    ├── [GLES3]
    ├── [Metal]
    ├── [Switch]
    ├── [Vulkan]
    └── [Validate]
```

## 快速查找表

### 按功能分类

#### 基础工具
- **类型系统**：[[Common]] - `real` 类型、`PositionInputs` 结构
- **数学函数**：[[Common]] - `SafeNormalize`, `FastACos`, `FastATan`
- **空间转换**：[[SpaceTransforms]] - `TransformObjectToWorld`, `TransformTangentToWorld`

#### 材质属性
- **粗糙度转换**：[[CommonMaterial]] - `PerceptualRoughnessToRoughness`
- **各向异性**：[[CommonMaterial]] - `ConvertAnisotropyToRoughness`
- **法线混合**：[[CommonMaterial]] - `BlendNormalRNM`
- **三平面映射**：[[CommonMaterial]] - `ComputeTriplanarWeights`

#### 光照计算
- **BRDF 评估**：[[BSDF]] - `D_GGX`, `V_SmithJointGGX`, `F_Schlick`
- **光源衰减**：[[CommonLighting]] - `PunctualLightAttenuation`
- **遮挡计算**：[[CommonLighting]] - `GetHorizonOcclusion`, `GetSpecularOcclusionFromAmbientOcclusion`
- **面光源**：[[AreaLighting]] - `DiffuseSphereLightIrradiance`

#### 颜色空间
- **sRGB 转换**：[[Color]] - `SRGBToLinear`, `LinearToSRGB`
- **Gamma 转换**：[[Color]] - `Gamma22ToLinear`, `LinearToGamma22`
- **ACES 转换**：[[ACES]] - ACES 颜色空间函数

#### 纹理采样
- **基础采样**：[[Texture]] - `UnityTexture2D`, `Sample`
- **虚拟纹理**：[[VirtualTexturing]] - `VirtualTexturingLookup`, `VirtualTexturingSample`
- **UV 映射**：[[SampleUVMapping]] - `UVMapping` 结构，支持 UVSet/平面/三平面

#### 采样
- **球面采样**：[[Sampling]] - `SampleSphereUniform`, `SampleHemisphereCosine`
- **低差异序列**：[[Hammersley]] - `Hammersley2dSeq`
- **Fibonacci 序列**：[[Fibonacci]] - `Fibonacci2dSeq`

#### 阴影
- **阴影偏移**：[[CommonShadow]] - `GetShadowPosOffset`
- **PCF 过滤**：[[ShadowSamplingTent]] - `SampleShadow_GetTexelWeights_Tent_3x3`

## 学习路径建议

### 1. 基础路径（必学）

1. **[[Common]]** - 理解基础类型系统和工具函数
2. **[[SpaceTransforms]]** - 掌握坐标空间转换
3. **[[CommonMaterial]]** - 了解材质属性处理
4. **[[Color]]** - 理解颜色空间转换

### 2. 光照路径（PBR 渲染）

1. **[[CommonLighting]]** - 光照工具函数
2. **[[BSDF]]** - BRDF 模型（Fresnel、GGX、漫反射）
3. **[[AreaLighting]]** - 面光源计算
4. **[[CommonShadow]]** - 阴影处理

### 3. 高级路径（特殊效果）

1. **[[Sampling]]** - 采样理论
2. **[[ParallaxMapping]]** - 视差映射
3. **[[VolumeRendering]]** - 体积渲染
4. **[[VirtualTexturing]]** - 虚拟纹理

### 4. 系统路径（优化和工具）

1. **[[UnityInstancing]]** - GPU 实例化
2. **[[Packing]]** - 数据打包优化
3. **[[Debug]]** - 调试工具

## 文档清单

### 核心基础（7个）
- ✅ [[Macros]] - 宏定义全览
- ✅ [[Common]] - 基础类型、工具函数
- ✅ [[CommonMaterial]] - 材质属性工具
- ✅ [[CommonLighting]] - 光照计算工具
- ✅ [[CommonShadow]] - 阴影采样工具
- ✅ [[CommonDeprecated]] - 废弃函数
- ✅ [[SpaceTransforms]] - 空间变换

### 颜色（2个）
- ✅ [[Color]] - 颜色空间转换
- ✅ [[ACES]] - ACES 颜色空间

### 光照（3个）
- ✅ [[BSDF]] - BRDF 模型
- ✅ [[AreaLighting]] - 面光源
- ✅ [[EntityLighting]] - 实体光照

### 采样（4个）
- ✅ [[Sampling]] - 采样函数集合
- ✅ [[Hammersley]] - Hammersley 序列
- ✅ [[Fibonacci]] - Fibonacci 序列
- ✅ [[SampleUVMapping]] - UV 映射抽象

### 几何（4个）
- ✅ [[GeometricTools]] - 几何工具
- ✅ [[ParallaxMapping]] - 视差映射
- ✅ [[PerPixelDisplacement]] - 每像素位移
- ✅ [[VertexCubeSlicing]] - 顶点立方体切片

### 纹理（4个）
- ✅ [[Texture]] - 纹理采样抽象
- ✅ [[TextureStack]] - 虚拟纹理堆栈
- ✅ [[VirtualTexturing]] - 虚拟纹理
- ✅ [[Packing]] - 数据打包/解包

### 数学工具（6个）
- ✅ [[Hashes]] - 哈希函数
- ✅ [[Random]] - 伪随机数生成
- ✅ [[Filtering]] - 过滤函数
- ✅ [[SDF2D]] - 2D 有符号距离场
- ✅ [[SpaceFillingCurves]] - 空间填充曲线
- ✅ [[SphericalHarmonics]] - 球谐函数

### 系统（4个）
- ✅ [[UnityInstancing]] - Unity GPU 实例化
- ✅ [[UnityDOTSInstancing]] - DOTS 实例化
- ✅ [[Version]] - 着色器库版本
- ✅ [[Tessellation]] - 曲面细分

### 阴影（1个）
- ✅ [[ShadowSamplingTent]] - Tent 函数 PCF 过滤

### 其他（11个）
- ✅ [[Debug]] - 调试工具
- ✅ [[ShaderDebugPrint]] - 着色器调试打印
- ✅ [[Refraction]] - 折射函数
- ✅ [[PhysicalCamera]] - 物理相机
- ✅ [[ScreenCoordOverride]] - 屏幕坐标覆盖
- ✅ [[VolumeRendering]] - 体积渲染
- ✅ [[BC6H]] - BC6H 压缩
- ✅ [[GlobalSamplers]] - 全局采样器
- ✅ [[GraniteShaderLibBase]] - Granite 虚拟纹理基础

### 平台 API（8个）
- ✅ [[D3D11]] - DirectX 11
- ✅ [[GLCore]] - OpenGL Core
- ✅ [[GLES2]] - OpenGL ES 2.0
- ✅ [[GLES3]] - OpenGL ES 3.0
- ✅ [[Metal]] - Metal
- ✅ [[Switch]] - Nintendo Switch
- ✅ [[Vulkan]] - Vulkan
- ✅ [[Validate]] - 平台验证

**总计**：54 个文档文件全部完成 ✅

## 使用建议

1. **新着色器开发**：从 [[Common]] 开始，根据需求包含相应模块
2. **PBR 材质**：使用 [[BSDF]] 和 [[CommonMaterial]]
3. **光照计算**：参考 [[CommonLighting]] 和 [[AreaLighting]]
4. **平台兼容**：Unity 自动处理平台 API，无需手动包含
5. **性能优化**：使用 [[Packing]] 减少带宽，使用 [[UnityInstancing]] 减少 Draw Call

## 版本信息

- **着色器库版本**：13.1（见 [[Version]]）
- **Unity 版本**：基于 Unity Render Pipelines Core 14.0.7

## 参考资料

- Unity 官方文档：https://docs.unity3d.com/Packages/com.unity.render-pipelines.core@14.0/manual/index.html
- Real-Time Rendering 4th Edition：https://www.realtimerendering.com/
- Physically Based Rendering：https://www.pbr-book.org/

